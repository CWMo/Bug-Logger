doctype html
html
  head
    title Bug Logger - New Bug
    link(rel="icon" type="image/x-icon" href="public/images/bug.png")
    link(rel="preconnect" href="https://fonts.googleapis.com")
    link(rel="preconnect" href="https://fonts.gstatic.com" crossorigin)
    link(href!="https://fonts.googleapis.com/css2?family=Fuzzy+Bubbles&display=swap" rel="stylesheet")
    style.
      body {
        font-family: sans-serif;
        background-color: orange;
        color: white;
        padding: 10px;
      }

      #msgLayer {
        position: fixed;
        margin: 0;
        width: 90%;
        height: 90%;
        display: flex;
        visibility: hidden;
      }

      #msg {
        margin: auto;
        color: white;
        background-color: orange;
        opacity: 0.5;
        font-size: 0;
        transition: 1s;
      }

      /* The side navigation menu */
      #sidenav {
        height: 100%; /* 100% Full-height */
        width: 0; /* 0 width - change this with JavaScript */
        position: fixed; /* Stay in place */
        z-index: 1; /* Stay on top */
        top: 0; /* Stay at the top */
        left: 0;
        background-color: black;
        overflow-x: hidden; /* Disable horizontal scroll */
        transition: 0.5s; /* 0.5 second transition effect to slide in the sidenav */
        opacity: 0.9;
      }

      /* The navigation menu links */
      #sidenav a {
        padding: 0px 8px 16px 32px;
        text-decoration: none;
        font-size: 25px;
        color: orange;
        display: block;
        transition: 0.3s;
      }
      #sidenav a:hover {
        font-weight: bold;
      }
      #sidenav a:active {
        transform: translateY(2px);
      }

      #menuTop {
        text-align: right;
      }
      #menuTop a {
        font-size: 4em;
      }

      /* On smaller screens, where height is less than 450px, change the style of the sidenav (less padding and a smaller font size) */
      @media screen and (max-height: 450px) {
        #sidenav a {
          font-size: 18px;
        }
        #menuTop a {
          font-size: 3em;
        }
      }

      #menuOpener {
        font-size: 2em;
        cursor: pointer;
        display: block;
        position: fixed;
      }
      #menuOpener:hover {
        font-weight: bold;
      }

      #pageTitle {
        text-align: center;
      }

      form {
        background-color: purple;
        padding: 5%;
        max-width: 500px;
        margin: auto;
        border-radius: 0.2rem;
        border: 1px solid transparent;
      }

      textarea {
        height: 30vh;
      }

      .box, .halfBox {
        font-family: "Fuzzy Bubbles", cursive; /* font to indicate user inputs */
        border-radius: 0.1rem;
        border: 1px solid transparent;
      }

      .box {
        width: 99%;
      }

      .halfBox {
        width: 200px;
      }

      .button {
        padding: 0.375rem 0.75rem;
        border: 1px solid transparent;
        border-radius: 0.25rem;
        background-color: orange;
        color: white;
        cursor: pointer;
        width: 10rem;
      }
      .button:hover{
        font-weight:bold;
      }
      .button:active {
        transform: translateY(2px);
      }

      #categoryArea {
        display: flex;
        flex-wrap: wrap;
        justify-content: space-between;
        row-gap: 10px;/* in case two rows required when screen gets narrow */
      }

      #buttonArea {
        display: flex;/* just for centering of its child: submit button */
      }

      #submit {
        margin: auto;/*centering within a flex container */
      }
  body
    #msgLayer
      #msg The Bug is now recorded.
    header
      #sidenav
        #menuTop
          a(href="#" class="closebtn" onclick="closeNav()") &times;
        a(href="#") Home
        a(href="#") New Bug
        a(href="#") About
        a(href="#") Logout
      span#menuOpener(onclick="openNav()") &#9776;
    section
      h1#pageTitle Record a newly found Bug
      form#newBugForm
        label Title
          br
          input#title.box(type="text" name="title" placeholder="Briefly describe the bug" required)
        br
        br
        label Description
          br
          textarea#desc.box(name="desc" placeholder="Describe in details" required)
        #categoryArea
          label Priority
            br
            select#priority.halfBox(name="priority" required)
              option(value="" selected disabled) Select a level of priority
              option(value="Topmost") Topmost
              option(value="Severe") Severe
              option(value="Medium") Medium
              option(value="Low") Low
          br
          br
          label Assign to
            br
            select#assignTo.halfBox(name="assignTo")
              option(value="" selected disabled) Select a person for this bug
        br
        br
        #buttonArea
          input#submit.button(type="submit" value="Submit")
    script(src="https://code.jquery.com/jquery-2.2.1.min.js" integrity="sha256-gvQgAFzTH6trSrAWoH1iPo9Xc96QxSZ3feW6kem+O00=" crossorigin="anonymous")
    script(type="text/JavaScript").
      /* Set the width of the side navigation to 0 */
      function openNav() {
        document.getElementById("sidenav").style.width = "200px";
      }
      /* Set the width of the side navigation to 250px */
      function closeNav() {
        document.getElementById("sidenav").style.width = "0";
      }

      $(function() {
        $("#title").focus();
        $('#newBugForm').submit(function(e){
          e.preventDefault();
          $(this).attr('action', "/api/bugs");
          $.ajax({
            type: "POST",
            url: "/api/bugs",
            data: $(this).serialize(),
            success: function(data) {
              $("#msgLayer").css("visibility","visible");
              $("#msg").css("fontSize","200%");
              setTimeout(()=>{window.location.reload(true)}, 1000); 
            }
          });
        });
      });  
